CVEEMPLEADO INT PRIMARY KEY,
NOMBRE VARCHAR(20) NOT NULL,
APELLIDOP VARCHAR(15) NOT NULL,
APELLIDOM VARCHAR(15) NOT NULL,
TELEFONO VARCHAR(12) NOT NULL,
TURNO VARCHAR(10) NOT NULL

--insertar datos a la tabla empleados
Insert into EMPLEADOS Values(1,'Efrain','Tovar','Meza','3511255999','Matutino')

Insert into EMPLEADOS Values(2,'Antonio','Perez','jil','3511255999','Matutino')

Insert into EMPLEADOS Values(3,'Jafet','Tovar','Meza','3511255999','Vespertino')

Insert into EMPLEADOS Values(4,'Dario','Tovar','Meza','3511255999','Sabatino')

Insert into EMPLEADOS Values(5,'Juan','Lopez','Meza','3511255999','Matutino')

Insert into EMPLEADOS Values(6,'Pedro','Perez','Hernandez','3511255999','Matutino')

Insert into EMPLEADOS Values(7,'Brian','Camarillo','del Toro','3511255999','Vespertino')

Insert into EMPLEADOS Values(8,'Kevin','Ledezma','Infante','3511255999','Sabatino')

Insert into EMPLEADOS Values(9,'Paola','Camarillo','Vega','3511255999','Vespertino')

Insert into EMPLEADOS Values(10,'Maria','Ledezma','Infante','3511255999','Sabatino')

Select * From EMPLEADOS

--para cuando no tengo un dato y permite que no lo ponga 
--Insert into empleados(turno,apellidop,apellidom,cveempleado, y telefeno no se pondria)
--values('matutino','blas','peña',5)

--tabla provedores
 CVEPROVEDORES INT PRIMARY KEY,
 NOMBREPROV VARCHAR(30) NOT NULL,
 TELEFONO VARCHAR(12) NOT NULL,
 DIRECCION VARCHAR(50) NOT NULL

 insert into PROVEDORES values(100,'Abarrotes Ochoa','3511344545','Zamora mich. bodega #89')
 insert into PROVEDORES values(101,'Duarte','3511344589','Zamora mich. asjldsa')
 insert into PROVEDORES values(102,'Sabritas','3511344545','Zamora mich. bodega #89')
 insert into PROVEDORES values(103,'Cremeria la villa','3511344545','Zamora mich.')
 insert into PROVEDORES values(104,'19 Hermnaos','3511344545','La piedad mich. bodega #89')
 insert into PROVEDORES values(105,'Barcel','3511346764','Jacona mich. la calzada')
 insert into PROVEDORES values(106,'Medecinas julio','3515654454','Zamora mich. Constitucion #23')
 insert into PROVEDORES values(107,'Yakult','3516755656','Ecuandureo mich.col. Camarillo ')
 insert into PROVEDORES values(108,'Coca cola','3511344545','Zamora mich. bodega #89')
 insert into PROVEDORES values(109,'Pepsi','3511344545','Zamora mich.')


 select* from PROVEDORES

 --tabla compras
  CVECOMPRAS INT PRIMARY KEY,
 FECHACOMPRA DATE DEFAULT(GETDATE()) NOT NULL,
 TOTALCOMPRA MONEY DEFAULT(0)

 insert into COMPRAS(CVECOMPRAS,TOTALCOMPRA)
 values(1000)
 
 insert into COMPRAS(CVECOMPRAS,TOTALCOMPRA)
 values(1001)
 insert into COMPRAS(CVECOMPRAS)
 values(1002)
 insert into COMPRAS(CVECOMPRAS)
 values(1003)
 insert into COMPRAS(CVECOMPRAS)
 values(1004)
 insert into COMPRAS(CVECOMPRAS)
 values(1005)
 insert into COMPRAS(CVECOMPRAS)
 values(1006)
 insert into COMPRAS(CVECOMPRAS)
 values(1007)
 insert into COMPRAS(CVECOMPRAS)
 values(1008)
 insert into COMPRAS(CVECOMPRAS)
 values(1009)
 select * from Compras

 --tabla ventas
 CVEVENTA INT PRIMARY KEY,
FECHAVTA DATE DEFAULT(GETDATE()) NOT NULL,
TOTALVTA MONEY DEFAULT(0) NOT NULL,

insert into VENTAS(CVEVENTA) values(1000)
insert into VENTAS(CVEVENTA) values(1001)
insert into VENTAS(CVEVENTA) values(1002)
insert into VENTAS(CVEVENTA) values(1003)
insert into VENTAS(CVEVENTA) values(1004)
insert into VENTAS(CVEVENTA) values(1005)
insert into VENTAS(CVEVENTA) values(1006)
insert into VENTAS(CVEVENTA) values(1007)
insert into VENTAS(CVEVENTA) values(1008)
insert into VENTAS(CVEVENTA) values(1009)


--tabla detalleempvta
CVEEMPLEADO INT FOREIGN KEY REFERENCES EMPLEADOS NOT NULL,
 CVEVENTA INT FOREIGN KEY REFERENCES VENTAS NOT NULL,

 insert into DETALLEEMPVTA values(1,1000)
 insert into DETALLEEMPVTA values(2,1001)
 insert into DETALLEEMPVTA values(3,1002)
 insert into DETALLEEMPVTA values(4,1003)
 insert into DETALLEEMPVTA values(5,1004)
 insert into DETALLEEMPVTA values(6,1005)
 insert into DETALLEEMPVTA values(7,1006)
 insert into DETALLEEMPVTA values(8,1007)
 insert into DETALLEEMPVTA values(9,1008)
 insert into DETALLEEMPVTA values(10,1009)


 --tabla detalleprovcomp
 CVEPROVEDORES INT FOREIGN KEY REFERENCES PROVEDORES NOT NULL,
 CVECOMPRAS INT FOREIGN KEY REFERENCES COMPRAS NOT NULL

 insert into DETALLEPROVCOMP values(100,1000)
 insert into DETALLEPROVCOMP values(101,1001)
 insert into DETALLEPROVCOMP values(102,1003)
 insert into DETALLEPROVCOMP values(103,1004)
 insert into DETALLEPROVCOMP values(104,1005)
 insert into DETALLEPROVCOMP values(105,1006)
 insert into DETALLEPROVCOMP values(106,1007)
 insert into DETALLEPROVCOMP values(107,1008)
 insert into DETALLEPROVCOMP values(108,1009)
 insert into DETALLEPROVCOMP values(109,1002)

 --tabla productos

  CVEPRODUCTOS INT PRIMARY KEY,
 NOMBREPRO VARCHAR(30) NOT NULL,
 PRECIOCOMPRA MONEY DEFAULT(0) NOT NULL,
 FECHACADUCIDAD DATE NOT NULL,
 EXISTENCIA INT DEFAULT(0) NOT NULL,
 PRECIOVTA MONEY DEFAULT(0)

 insert into PRODUCTOS(CVEPRODUCTOS,NOMBREPRO,FECHACADUCIDAD)values(100000,'Doritos rojos','2017-03-04')
 insert into PRODUCTOS(CVEPRODUCTOS,NOMBREPRO,FECHACADUCIDAD)values(100001,'GAlletas marias','2017-03-04')
 insert into PRODUCTOS(CVEPRODUCTOS,NOMBREPRO,FECHACADUCIDAD)values(100002,'Manteca','2017-03-04')
 insert into PRODUCTOS(CVEPRODUCTOS,NOMBREPRO,FECHACADUCIDAD)values(100003,'Chetos flamihot','2020-03-04')
 insert into PRODUCTOS(CVEPRODUCTOS,NOMBREPRO,FECHACADUCIDAD)values(100004,'Blanca nieves 250gr','2030-03-04')
 insert into PRODUCTOS(CVEPRODUCTOS,NOMBREPRO,FECHACADUCIDAD)values(100005,'Blanca Nieves 500gr','2020-03-04')
 insert into PRODUCTOS(CVEPRODUCTOS,NOMBREPRO,FECHACADUCIDAD)values(100006,'Electrolit 300ml','2020-03-04')
 insert into PRODUCTOS(CVEPRODUCTOS,NOMBREPRO,FECHACADUCIDAD)values(100007,'Nescafe 10gr','2019-11-11')
 insert into PRODUCTOS(CVEPRODUCTOS,NOMBREPRO,FECHACADUCIDAD)values(100008,'Maseca 1kg','2019-12-12')
 insert into PRODUCTOS(CVEPRODUCTOS,NOMBREPRO,FECHACADUCIDAD)values(100009,'Mantequilla la villita','2019-12-04')

 --Detallecompraproducto
 insert into DETALLECOMPRPRODU values(100000,1003,10)
 insert into DETALLECOMPRPRODU values(100001,1000,25)
 insert into DETALLECOMPRPRODU values(100002,1000,10)
  insert into DETALLECOMPRPRODU values(100003,1003,10)
  insert into DETALLECOMPRPRODU values(100004,1000,20)
 insert into DETALLECOMPRPRODU values(100005,1000,20)
 insert into DETALLECOMPRPRODU values(100008,1000,20)
 insert into DETALLECOMPRPRODU values(100006,1007,10)
 insert into DETALLECOMPRPRODU values(100007,1007,10)
 insert into DETALLECOMPRPRODU values(100009,1004,20)
 
 SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU WHERE CVEPRODUCTO=100000 AND CVECOMPRA=1003
 
 UPDATE PRODUCTOS SET EXISTENCIA=EXISTENCIA+(SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU 
 WHERE CVEPRODUCTO=100000 AND CVECOMPRA=1003),PRECIOCOMPRA=9.90, PRECIOVTA=12 WHERE CVEPRODUCTOS=100000

 UPDATE PRODUCTOS SET EXISTENCIA=EXISTENCIA+(SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU 
 WHERE CVEPRODUCTO=100001 AND CVECOMPRA=1000),PRECIOCOMPRA=8, PRECIOVTA=10 WHERE CVEPRODUCTOS=100001

 UPDATE PRODUCTOS SET EXISTENCIA=EXISTENCIA+(SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU 
 WHERE CVEPRODUCTO=100002 AND CVECOMPRA=1000),PRECIOCOMPRA=17, PRECIOVTA=20 WHERE CVEPRODUCTOS=100002

 UPDATE PRODUCTOS SET EXISTENCIA=EXISTENCIA+(SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU 
 WHERE CVEPRODUCTO=100003 AND CVECOMPRA=1003),PRECIOCOMPRA=6.90, PRECIOVTA=8 WHERE CVEPRODUCTOS=100003

 UPDATE PRODUCTOS SET EXISTENCIA=EXISTENCIA+(SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU 
 WHERE CVEPRODUCTO=100004 AND CVECOMPRA=1000),PRECIOCOMPRA=7, PRECIOVTA=8 WHERE CVEPRODUCTOS=100004

 UPDATE PRODUCTOS SET EXISTENCIA=EXISTENCIA+(SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU 
 WHERE CVEPRODUCTO=100005 AND CVECOMPRA=1000),PRECIOCOMPRA=16.4, PRECIOVTA=18 WHERE CVEPRODUCTOS=100005

 UPDATE PRODUCTOS SET EXISTENCIA=EXISTENCIA+(SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU 
 WHERE CVEPRODUCTO=100006 AND CVECOMPRA=1007),PRECIOCOMPRA=16, PRECIOVTA=18 WHERE CVEPRODUCTOS=100006

 UPDATE PRODUCTOS SET EXISTENCIA=EXISTENCIA+(SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU 
 WHERE CVEPRODUCTO=100007 AND CVECOMPRA=1007),PRECIOCOMPRA=7, PRECIOVTA=10 WHERE CVEPRODUCTOS=100007

 UPDATE PRODUCTOS SET EXISTENCIA=EXISTENCIA+(SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU 
 WHERE CVEPRODUCTO=100008 AND CVECOMPRA=1000),PRECIOCOMPRA=10, PRECIOVTA=13 WHERE CVEPRODUCTOS=100008

 UPDATE PRODUCTOS SET EXISTENCIA=EXISTENCIA+(SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU 
 WHERE CVEPRODUCTO=100009 AND CVECOMPRA=1004),PRECIOCOMPRA=7.8, PRECIOVTA=9 WHERE CVEPRODUCTOS=100009
 SELECT * FROM PRODUCTOS
 -- totales de compra sacando el total de compra con el precio de compra
 
UPDATE COMPRAS SET TOTALCOMPRA=TOTALCOMPRA+((SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU WHERE CVEPRODUCTO=100001)
*(SELECT PRECIOCOMPRA FROM PRODUCTOS WHERE CVEPRODUCTOS=100001)) WHERE CVECOMPRAS=1000
 
UPDATE COMPRAS SET TOTALCOMPRA=TOTALCOMPRA+((SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU WHERE CVEPRODUCTO=100002)
*(SELECT PRECIOCOMPRA FROM PRODUCTOS WHERE CVEPRODUCTOS=100002))WHERE CVECOMPRAS=1000

UPDATE COMPRAS SET TOTALCOMPRA=TOTALCOMPRA+((SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU WHERE CVEPRODUCTO=100004)
*(SELECT PRECIOCOMPRA FROM PRODUCTOS WHERE CVEPRODUCTOS=100004))WHERE CVECOMPRAS=1000

UPDATE COMPRAS SET TOTALCOMPRA=TOTALCOMPRA+((SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU WHERE CVEPRODUCTO=100005)
*(SELECT PRECIOCOMPRA FROM PRODUCTOS WHERE CVEPRODUCTOS=100005))WHERE CVECOMPRAS=1000

UPDATE COMPRAS SET TOTALCOMPRA=TOTALCOMPRA+((SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU WHERE CVEPRODUCTO=100008)
*(SELECT PRECIOCOMPRA FROM PRODUCTOS WHERE CVEPRODUCTOS=100008))WHERE CVECOMPRAS=1000

UPDATE COMPRAS SET TOTALCOMPRA=TOTALCOMPRA+((SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU WHERE CVEPRODUCTO=100000)
*(SELECT PRECIOCOMPRA FROM PRODUCTOS WHERE CVEPRODUCTOS=100000))WHERE CVECOMPRAS=1003

UPDATE COMPRAS SET TOTALCOMPRA=TOTALCOMPRA+((SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU WHERE CVEPRODUCTO=100003)
*(SELECT PRECIOCOMPRA FROM PRODUCTOS WHERE CVEPRODUCTOS=100003))WHERE CVECOMPRAS=1003

UPDATE COMPRAS SET TOTALCOMPRA=TOTALCOMPRA+((SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU WHERE CVEPRODUCTO=100006)
*(SELECT PRECIOCOMPRA FROM PRODUCTOS WHERE CVEPRODUCTOS=100006))WHERE CVECOMPRAS=1007

UPDATE COMPRAS SET TOTALCOMPRA=TOTALCOMPRA+((SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU WHERE CVEPRODUCTO=100007)
*(SELECT PRECIOCOMPRA FROM PRODUCTOS WHERE CVEPRODUCTOS=100007))WHERE CVECOMPRAS=1007

UPDATE COMPRAS SET TOTALCOMPRA=TOTALCOMPRA+((SELECT CANTIDADCOMP FROM DETALLECOMPRPRODU WHERE CVEPRODUCTO=100009)
*(SELECT PRECIOCOMPRA FROM PRODUCTOS WHERE CVEPRODUCTOS=100009))WHERE CVECOMPRAS=1004
SELECT * FROM VENTAS
--Llenar datos detallevtaprod
insert into DETALLEVTAPROD(CVEVENTA,CVEPRODUCTO,CANTIDADVTA) values(1000,100000,1)
insert into DETALLEVTAPROD(CVEVENTA,CVEPRODUCTO,CANTIDADVTA) values(1001,100001,1)
insert into DETALLEVTAPROD(CVEVENTA,CVEPRODUCTO,CANTIDADVTA) values(1002,100002,1)
insert into DETALLEVTAPROD(CVEVENTA,CVEPRODUCTO,CANTIDADVTA) values(1003,100003,1)
insert into DETALLEVTAPROD(CVEVENTA,CVEPRODUCTO,CANTIDADVTA) values(1004,100004,3)
insert into DETALLEVTAPROD(CVEVENTA,CVEPRODUCTO,CANTIDADVTA) values(1005,100005,2)
insert into DETALLEVTAPROD(CVEVENTA,CVEPRODUCTO,CANTIDADVTA) values(1006,100006,2)
insert into DETALLEVTAPROD(CVEVENTA,CVEPRODUCTO,CANTIDADVTA) values(1007,100007,1)
insert into DETALLEVTAPROD(CVEVENTA,CVEPRODUCTO,CANTIDADVTA) values(1008,100008,3)
insert into DETALLEVTAPROD(CVEVENTA,CVEPRODUCTO,CANTIDADVTA) values(1009,100009,1)
--ACTUALZAR EL PRECIO DETOTAL DE CADA VENTE EN BASE A LOS PRODUCTOS VENDIDOS
UPDATE VENTAS SET TOTALVTA=TOTALVTA+((SELECT CANTIDADVTA FROM DETALLEVTAPROD WHERE CVEPRODUCTO=100000)*
(SELECT PRECIOVTA FROM PRODUCTOS WHERE CVEPRODUCTOS=100000))WHERE CVEVENTA=1000
UPDATE VENTAS SET TOTALVTA=TOTALVTA+((SELECT CANTIDADVTA FROM DETALLEVTAPROD WHERE CVEPRODUCTO=100001)*
(SELECT PRECIOVTA FROM PRODUCTOS WHERE CVEPRODUCTOS=100001))WHERE CVEVENTA=1001
UPDATE VENTAS SET TOTALVTA=TOTALVTA+((SELECT CANTIDADVTA FROM DETALLEVTAPROD WHERE CVEPRODUCTO=100002)*
(SELECT PRECIOVTA FROM PRODUCTOS WHERE CVEPRODUCTOS=100002))WHERE CVEVENTA=1002
UPDATE VENTAS SET TOTALVTA=TOTALVTA+((SELECT CANTIDADVTA FROM DETALLEVTAPROD WHERE CVEPRODUCTO=100003)*
(SELECT PRECIOVTA FROM PRODUCTOS WHERE CVEPRODUCTOS=100003))WHERE CVEVENTA=1003
UPDATE VENTAS SET TOTALVTA=TOTALVTA+((SELECT CANTIDADVTA FROM DETALLEVTAPROD WHERE CVEPRODUCTO=100004)*
(SELECT PRECIOVTA FROM PRODUCTOS WHERE CVEPRODUCTOS=100004))WHERE CVEVENTA=1004
UPDATE VENTAS SET TOTALVTA=TOTALVTA+((SELECT CANTIDADVTA FROM DETALLEVTAPROD WHERE CVEPRODUCTO=100005)*
(SELECT PRECIOVTA FROM PRODUCTOS WHERE CVEPRODUCTOS=100005))WHERE CVEVENTA=1005
UPDATE VENTAS SET TOTALVTA=TOTALVTA+((SELECT CANTIDADVTA FROM DETALLEVTAPROD WHERE CVEPRODUCTO=100006)*
(SELECT PRECIOVTA FROM PRODUCTOS WHERE CVEPRODUCTOS=100006))WHERE CVEVENTA=1006
UPDATE VENTAS SET TOTALVTA=TOTALVTA+((SELECT CANTIDADVTA FROM DETALLEVTAPROD WHERE CVEPRODUCTO=100007)*
(SELECT PRECIOVTA FROM PRODUCTOS WHERE CVEPRODUCTOS=100007))WHERE CVEVENTA=1007
UPDATE VENTAS SET TOTALVTA=TOTALVTA+((SELECT CANTIDADVTA FROM DETALLEVTAPROD WHERE CVEPRODUCTO=100008)*
(SELECT PRECIOVTA FROM PRODUCTOS WHERE CVEPRODUCTOS=100008))WHERE CVEVENTA=1008
UPDATE VENTAS SET TOTALVTA=TOTALVTA+((SELECT CANTIDADVTA FROM DETALLEVTAPROD WHERE CVEPRODUCTO=100009)*
(SELECT PRECIOVTA FROM PRODUCTOS WHERE CVEPRODUCTOS=100009))WHERE CVEVENTA=1009

--QUITAR DE INVENTARIO LOS PRODUCTOS VENDIDOS
UPDATE PRODUCTOS SET EXISTENCIA=(EXISTENCIA-1) WHERE CVEPRODUCTOS=100000
UPDATE PRODUCTOS SET EXISTENCIA=(EXISTENCIA-1) WHERE CVEPRODUCTOS=100001
UPDATE PRODUCTOS SET EXISTENCIA=(EXISTENCIA-1) WHERE CVEPRODUCTOS=100002
UPDATE PRODUCTOS SET EXISTENCIA=(EXISTENCIA-1) WHERE CVEPRODUCTOS=100003
UPDATE PRODUCTOS SET EXISTENCIA=(EXISTENCIA-3) WHERE CVEPRODUCTOS=100004
UPDATE PRODUCTOS SET EXISTENCIA=(EXISTENCIA-2) WHERE CVEPRODUCTOS=100005
UPDATE PRODUCTOS SET EXISTENCIA=(EXISTENCIA-2) WHERE CVEPRODUCTOS=100006
UPDATE PRODUCTOS SET EXISTENCIA=(EXISTENCIA-1) WHERE CVEPRODUCTOS=100007
UPDATE PRODUCTOS SET EXISTENCIA=(EXISTENCIA-3) WHERE CVEPRODUCTOS=100008
UPDATE PRODUCTOS SET EXISTENCIA=(EXISTENCIA-1) WHERE CVEPRODUCTOS=100009
SELECT* FROM PRODUCTOS
--Consultas
select* from PRODUCTOS
select* from COMPRAS
select* from DETALLECOMPRPRODU
select* from DETALLEEMPVTA
select* from DETALLEPROVCOMP
select* from DETALLEVTAPROD
select* from EMPLEADOS
select* from PROVEDORES
select* from VENTAS
--Mostrar las ventas que realizo el empleado 1, mostrar la fecha de la venta asi como el nombre y telefono del empleado
Select EMPLEADOS.NOMBRE, EMPLEADOS.TELEFONO, VENTAS.FECHAVTA, VENTAS.TOTALVTA from (EMPLEADOS inner join DETALLEEMPVTA on DETALLEEMPVTA.CVEEMPLEADO=EMPLEADOS.CVEEMPLEADO)inner join VENTAS on 
VENTAS.CVEVENTA=DETALLEEMPVTA.CVEVENTA where EMPLEADOS.CVEEMPLEADO=2
/*
sacar todos los libros con su nombre, tipo y existencias de la editorial que su nombre empieze con la letra A
*/


/*
sacar todos los libros con su nombre, tipo y existencias de la editorial que su nombre Termine letra A
*/

/*
sacar todos los libros con su nombre y de la editorial que su wue nos surte el provedor que su nombre empieze con la letra d y termine con L
select distinct Nomlib,Nomedit 
from editorial inner join (libros inner join( LIBPROV inner join provedores
on provedores.cveprov=libpro.cveprov)on libroprov.cvelib=libros.cvelibro)on libros.cvedit=editorial.cvedit
where nprov like'D%L'

*/
/*Sacar todos los libros con su nombre y el nombre de su editorial que se hayan vendido en una enta realizada por el empleado
que su nombre sea sandra, su sexo sea f y su edad se encuentre entre 20 o 25

SELECT NOMLIB,NOMBREEDIT
FROM EDOTORIAL INNER JOIN(LIBROS INNER JOIN(DETVTALIB INNER JOIN (VENTAS INNER JOIN(EMPTVTAS INNER JOIN(EMPLEADOS ON 
EMPLEADOS.CVEMP=EMPVTAS.CVEMP)ON EMPVTAS.CVEVTA=VENTAS.CVENTA)ON VENTAS.CVEVTA=DETVTALIB.CVETVA) ON DETVTALIB.CVELIBR=LIBROS.CVELIBR)
ON LIBROS.CVEEDIT=EDITORIAL.CVEDIT
WHERE NOMBRE='jUAN cARLOS' AND SEXO='f' AND ( EDAD BETWEEN 22 AND 25)

*/

/*
SACAR EL PRECIO DE VENTA MAXIMO DE TODOS LOS LIBROS DE  LAS EDITORIALES ANAGRAMA O ARIEL
SELECT MAX(PRECIOVTA) AS ' MAXIMO PRECIO DE VENTA' SI TIENE ESPACIOS DEBEMOS PONERLO ENTRE COMILLAS SI NO NEL
FROM EDITORIAL INNER JOIN LIBROS ON LIBROS.CVEDIR=EDITORIAL.CVEDIT 
WHERE NOMBRE='ARIEL' OR NOMBRE='ANAGRAMA'

*/

/*
SACAR EL PRECIO DE VENTA MINIMO DE TODOS LOS LIBROS DE  LAS EDITORIALES ANAGRAMA O ARIEL
SELECT MIN(PRECIOVTA) AS ' MINIMO PRECIO DE VENTA' SI TIENE ESPACIOS DEBEMOS PONERLO ENTRE COMILLAS SI NO NEL
FROM EDITORIAL INNER JOIN LIBROS ON LIBROS.CVEDIR=EDITORIAL.CVEDIT 
WHERE NOMBRE='ARIEL' OR NOMBRE='ANAGRAMA'
*/

/*
sacar el total de registros de todos los libros de las editoriales alagrama o ariel

select count(*) as 'total de registros'
from editorial inner join libros on libros.cveedit= editorial.cveedit where nombreedit='ariel' or nombreedit='anagrama'



SACAR la sumatoria de los precios de compra DE TODOS LOS LIBROS DE  LAS EDITORIALES ANAGRAMA O ARIEL
SELECT sum(preciocom) AS ' suma de precios de compra' SI TIENE ESPACIOS DEBEMOS PONERLO ENTRE COMILLAS SI NO NEL
FROM EDITORIAL INNER JOIN LIBROS ON LIBROS.CVEDIR=EDITORIAL.CVEDIT 
WHERE NOMBRE='ARIEL' OR NOMBRE='ANAGRAMA'

SACAR el promedio de los precios de compra DE TODOS LOS LIBROS DE  LAS EDITORIALES ANAGRAMA O ARIEL
SELECT AVG(preciocom) AS ' suma de precios de compra' SI TIENE ESPACIOS DEBEMOS PONERLO ENTRE COMILLAS SI NO NEL
FROM EDITORIAL INNER JOIN LIBROS ON LIBROS.CVEDIR=EDITORIAL.CVEDIT 
WHERE NOMBRE='ARIEL' OR NOMBRE='ANAGRAMA'
*/

/*
sacar todos los libros con su nombre, tipo, y existencias que nos surte el provedor que la primer letra de su nombre
se encuenre entre el rango de la A a la D y que su tercer letra sea N y que su estado sea jalisco
select nomlib,tipo,existencias
from libros inner join(libprov inner join provedores on provedores.cveprov=libprov.cveprov)on libprov.cvelib=libros.cvelib
where Nprov like'[A-D_N%]' and edo=jalisco 
el guin significa que va  ir cualquier puta cosa alv compa

sacar todos los libros con su nombre, tipo y existencias que nos surte el provedor que en su nombre contega una a
select nomlib,tipo,existencias
from libros inner join(libprov inner join provedores on provedores.cveprov=libprov.cveprov)on libprov.cvelib=libros.cvelib
where Nprov like'%A%'
*/

/*-------------------Consultas anidadad------------------
sacar todos los libros con su nombre, tipo y existencias de la editorial lumen o nevsky
select nomlib, tipo 
from libros where nomlib like'%po%' and cveedit in(select cvedit
								from editorial
								where editorial='lumen' or editorial='nevsky')

*/

/*combinacion con select anidadados y join
sacar todas las ventas con la fecha de vanta y el subtotal en la que se hayan vendido libros de la editorial ariel,que sus
existencias sean mayoresa 2 y menores a 10 y que su precio de compra sea mayor a 100

select from ventas inner join(detvtalib inner join libros on libros.cvelib=detvtalib.cvelib)on 
detvtalib.cvevta=ventas.cvevta
where(exixtensias between 2 and 10)and preciocpm>100 and cveedit in(select cveedit
                                                                   from editorial
																   where nombreedit='Anagrama')

sacar todos los libros cons u nombre y tipo de las editoriales anagrama y lumen si se encuentran en alguna venta con cantidad vendida 1
y que su fecha de venta sea 11/09/2019
select distinct nomlib,tipo
from libros inner join detvtalib on detvtalib.cvelib=libros.cvelib
where canvta=1 and cveedit in(select cveedit 
							from editorial
							where nombreedit='Anagrama' or nombredit='lumen')
and cvevta in(select cvevta
			from ventas
			where fechavta='2019/09/10')

sacar el nombre del editorial de los libros que su nombre contenga alguna A y su tipo sea literatura
si se encuentra en alguna venta con cantidad vendida 1, que su fecha de venta sea 10/09/2019 y que 
el estado del provedor sea puebla
select distinct nombreedit 
from provedores inner join(libprov inner join(libros inner join editorial on libros.cveedit= editorial.cveedit)
on libros.cvelib=libprov.cvelib) on libprov.cveprov=provedores.cveprov 
where edo='puebla' and nomlib like(%a%) and tipo='literatura'and libros.cvelib in(select cvelib
																		   from detvtalib
																		   where canvta=1 and cvevta in(select cvevta
																							from ventas
																							where fechavta='2019/10/09'))

sacar todas las ventas con su fecha de venta ,subtotal e iva de todas las ventas que haya realizado el empleado que su nombre 
comineze con laletra j , su sexo sea m , que se haya vendido 1 y su tipo de libro sea literatura

select distinct fechavta, subtotal, iva 
from libros inner join(detvtalib inner join ventas on ventas.cvevta=detvtalib.cvevta)on detvtalib.cvelib=libros.cvelib
where canvta=1 and tipo='literatura and ventas.cvevta in(select cvevta
														from empvtas
														where cveemp in(select cveemp
																		from empleados
																		where nombre like('j%') and sexo='M'))
*/

